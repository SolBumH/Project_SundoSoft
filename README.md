# 한솔범\_선도 프로젝트

# 해야할 일

---

# 기능 구현은 했으나 수정하고 싶은 것

- DB 입력 최적화하기 --> 최소한의 칼럼만 집어넣기

- 시군구, 법정동, 사용량만 넣고 이후 정보 조회는 ajax 로 조회하기

  - 예전 PreStatement 사용하는 것처럼 해보기
  - Mybatis 보다 빠른지 테스트

- GeoServer 레이어가 많이 느림, 어떻게 할 수 있을까

  - 캐시 레이어로 처리하려 하였으나, 다른 사용량이 들어오면 무용지물이 됨
  - 아직 처리하는 방법을 잘 모름
  - SQL 문을 수정하여 조금 더 빠르게 처리
  - Materialized View 를 사용하여 속도 개선, 인덱스는 파일 업로드 시 좀 느릴 듯

---

# 처리한 것

- ~~Map 레이어 출력~~

- ~~부족하지만 DB 입력~~

- ~~법정동 뷰 생성~~

  - DB 에 뷰 생성하기
  - GeoServer 에 Join 을 걸고 레이어 생성하기
  - 둘 중 뭐가 좋을 지 고민, 둘 다 새로운 데이터 업뎃 시 레이어 갱신됨

- ~~레이어 삭제 기능 구현~~

  - map 레이어에 name 을 넣고, name 이 map 레이어가 아닌 모든 레이어를 삭제 후 추가하는 방법

- ~~파일 업로드 기능 구현, 웬만한 방법 다 오류나는데 어떻게 처리할 수 있을까~~

  - pom dependency 기능 추가, bean 설정으로 해결, 이제 덜 까먹을 듯

- 시도, 시군구 뷰 만들기

  - ~~데이터가 많은지 저장이 안됨~~
    - ~~GeoServer 레이어 생성 시 오류나면서 생성시 안됨, SQL문은 확인해보았음~~
  - SQL 문을 수정하여 처리 완료
    - 기존에는 테이블끼리 조인 후 GroupBy 를 진행하였음
    - 지금은 Group By 를 먼저 진행한 테이블을 기준으로 join 하여 Group By 가 한번만 진행하도록 처리

- ~~레이어 클릭 시 사용량 출력~~

  - ~~값 받아오는 것 까지는 완료, 오버레이 띄우기~~

- ~~범례 기능 구현하기~~

  - QGIS 로 Natural Break 와 등간격 만들기
  - 추가적인 다른 좋은 것 생각해보기

- ~~홈페이지 CSS 하기~~

- ~~명령어 정리하기~~

- ~~우측 하단 범례 구분창 만들기~~
- ~~CDB_JENKSBINS 함수를 사용하여 범례를 만들어보기~~
- ~~NTILE 명령어를 이용하여 등간격 해보기~~
  - NTILE 은 등분위라서 곱셈을 이용하여 등간격 생성 완료